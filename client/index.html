<!DOCTYPE html>
<html>
<head>
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> -->
<script type="text/javascript" src="js/kb_shortcut.packed.js" ></script>
<script src="jquery/jquery-1.9.1.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
  			
  	$.getJSON("http://localhost:9099/yurl/keys",function(result){
      $.each(result, function(a,b,c){
        $("#keys").append(b.categoryNode + "::" + b.keyCombo + "\n");
        var kb = new kb_shortcut();
        kb.add(b.keyCombo, function(){
			//alert(b.categoryNode);
			var url = "http://localhost:9099/yurl/relate?parent=" +b.categoryNode+"&child=" +  $("#urls").children()[0].id;
			alert(url);
			$.getJSON(url,function(result){
				// TODO: check if successful or not
				alert(result);
				alert(result.status);
				//$("#urls").children()[0].remove();
			});

		})
      });
    });
    $.getJSON("http://localhost:9099/yurl/uncategorized",function(result){
      $.each(result, function(id, field){
        $("#urls").append("<li id="+id+">[" + id + "]: "+ field.title + " (" + field.url + ") " + "</li>");
      });
    });
  });
});
</script>
</head>
<body>
Key bindings<br>
<textarea id="keys"></textarea>
<br><br>
<button>get urls</button>
<ol id="urls"></ol>

</body>
</html>
